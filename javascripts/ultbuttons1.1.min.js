(function(a){if(!a.fn.on)throw"UltButtons requires jQuery 1.7 at least.";if(!a.ui||!a.ui.button)throw"UltButtons requires the jQuery UI Button widget.";var j=a.ui.button.prototype._create,k=a.ui.button.prototype._destroy,e=document.createElement("div"),g="unselectable"in e,b=function(){var a="userSelect",d=e.style;if(a in d)return a;for(var c=["Moz","Webkit","O","ms"],b=0;b<c.length;b++)if(a=c[b]+"UserSelect",a in d)return a;return!1}(),f,h,e=null;a.fn.disableSelection=function(){g&&this.find("*").andSelf().prop("unselectable", "on");b&&this.css(b,"none");return this.on("selectstart.disableSelection",!1)};a.fn.reenableSelection=function(){g&&this.find("*").andSelf().prop("unselectable","");b&&this.css(b,"");return this.off(".disableSelection")};a.ui.button.prototype._create=function(){j.apply(this,arguments);if("checkbox"===this.type||"radio"===this.type){var b=this;this.buttonElement.on("mousedown"+this.eventNamespace,function(d){1===d.which&&(f=this,h=b.element[0].checked,a(document).one("mouseup",function(){f=null}))}).on("mouseup"+ this.eventNamespace,function(a){if(!(1!==a.which||b.options.disabled)){var c=b.element[0];f===this&&setTimeout(function(){h===c.checked&&("checkbox"===b.type?(c.checked=!c.checked,b.refresh(),b.element.change()):c.checked||(c.checked=!0,b.refresh(),b.element.change()))},0)}}).disableSelection()}};a.ui.button.prototype._destroy=function(){("checkbox"===this.type||"radio"===this.type)&&this.buttonElement.reenableSelection();k.apply(this,arguments)};a.fn.ultButtonset=a.fn.buttonset;a.fn.ultButton=a.fn.button})(jQuery);